<article>
    
    <h1 class="od-title">Documentation for OpenDesk development</h1>
    <p>Hi there. If you want to develop on OpenDesk, you've come to the right place.</p>

    <hr>
    
    <h2>Technical info</h2>
    <p>Here are some technical details for developers.</p>
    
	<h3>Public site</h3>
	<p>
		A publicly facing site running OpenDesk can be found at <a href="http://178.62.208.124/#/">http://178.62.208.124/#/</a>.
	</p>
	
    <h3>Gulp</h3>
    
    <p>
        Gulp is a script handler that helps you build the site on the fly while developing. A complete build can be done by going to your project's dir in a terminal and running <pre>$ gulp build</pre>
    </p>
    <p>To have Gulp watch and concatenate your SASS files when you edit them, use <pre>$ gulp watch</pre></p>
    
    <h3>Git</h3>
    <p>
        You can make git remember your username for every push by going to console and entering <pre>$ git config credential.username yourusername</pre>
    </p>
    <p>Read more info on working with git in the <em>workflow guide</em> below.</p>
    
    <hr>

    <h2>Workflow guide</h2>
    <p>When working on the OpenDesk project, you are advised to follow these guidelines:</p>
    
    <h3>Always work on a separate branch</h3>
    <p>
        <em>develop</em> branch has the latest changes but you should never work directly on <em>develop</em>.
        Instead, create a feature or working branch and add/commit your changes to that.
        When you are finished working on a feature, do
    </p>
    <ol>
        <li><pre>$ git checkout develop</pre></li>
        <li><pre>$ git pull</pre></li>
        <li><pre>$ git checkout whateverYourBranchIs</pre></li>
        <li><pre>$ git merge develop</pre></li>
        <li>Fix conflicts, if any</li>
        <li><pre>$ git checkout develop</pre></li>
        <li><pre>$ git merge whateverYourBranchIs</pre></li>
        <li><pre>$ git push</pre></li>
    </ol>
    
    <h3>Always be documenting</h3>
    <p>
        When you create a new widget or a better way of running the site or whatever, write a short description of it on <strong>this</strong> documentation page.
        The documentation page comes with the project files under <pre>/app/src/documentation/view/documentation.html</pre>
        When you have an OpenDesk instance running, you can access the documentation in your browser at <pre>/#/documentation</pre> or follow the link in the footer.
    </p>
    
    <h3>Naming conventions</h3>
    <p>
        Custom-made widgets, filters, directives, etc. should be named with a <em>od</em> prefix to indicate that they are particular to the OpenDesk project.
        Here is an example from the notifications directive:
    </p>
    <pre>
        .directive('odNotifications' function() {})
        &lt;od-notifications>
        &lt;ul class="od-notifylist">
    </pre>
    
    <hr>

    <h2>Widgets</h2>
    <p>Custom widgets are listed here along with tips on how to implement them.</p>
    
    <h3>Dashboard tiles</h3>
    <p>We created a dashboard that will display the main features for the user.
    <br>It consists of several tiles, implemented using the following HTML:</p> 
			<pre>
				&lt;div class="dashboard-grid"&gt;
				&lt;div class="tile"&gt;&lt;/div&gt;
				&lt;/div&gt;
			</pre>
			<p>Positioning and alignment is done through flex-box.</p>
			<pre>
				.dashboard-grid {	
					display: flex;
					flex-wrap: wrap;
					justify-content: center;
					align-content: space-between;
					
					.tile {
						flex-grow: 1;
						display: inline-block;
						width: 150px;
						height: 150px;
						overflow: hidden;
						margin: .25rem;
					}
				}
			</pre>
    
	<h3>Flyout widget</h3>
	<p>The <em>od-flyout</em> widget is a sidenav that is used to present the sliding panels for userlisting and notification listing. We didn't use the <em>md-sidenav</em> because it didn't layout quite the way we'd like it to.</p>
	<p>You can add a flyout to your view with this code:</p>
	<pre>
		&lt;div class="od-flyout right" ng-class="{ open: on }" ng-click="toggleNotices()">
			&lt;div class="od-flyout--body" ng-click="$event.stopPropagation()">
				&lt;h2 class="od-flyout--title">Flyout title (optional)&lt;/h2>
				&lt;button ng-click="toggleNotices()" class="od-btn od-flyout--close">
					&lt;i class="material-icons">keyboard_arrow_right&lt;/i>
				&lt;/button>
			
				... Put some content here
			
			&lt;/div>
		&lt;/div>
	</pre>
	<p>
		You'll need edit your controller to be able close and open the flyout. Here we use a value <em>on</em> and a function <em>toggleNotices</em>.
		<em>toggleNotices</em> switches the class <em>open</em> when the flyout is <em>on</em>. The above example does not include a button to switch the flyout on.
		Refer to the code for <em>odUser</em> to see a complete implementation.
	</p>
	<h4>Options</h4>
	<p>
		Adding class <em>left</em> or <em>right</em> to the flyout will make it appear from either the left or right hand side of the screen.
	</p>
	
	<h3><em>od-title</em> class for headers </h3>
	<p>
		Adding the class <em>od-title</em> to any HTML element places that element in the header bar at the top of the screen.
		This is useful for &lt;h1> elements that only appear once on every page. On the dashboard page, the user's name is placed in the top bar using <em>od-title</em>:
		<pre>
			&lt;h1 class="od-title">Hej [Someone]&lt;/h1>
		</pre>
	</p>
	
    <h3>Notification widget</h3>
    <p>
        There is a notifications <em>directive</em> that you can pop in any template.
        Presently, it's featured in the <em>index.html</em> file so it shows up on every page.
        Using it is a matter of popping it into an HTML template using an <em>od-notifications</em> element.
    </p>
    <pre>
        &lt;od-notifications>&lt;/od-notifications>
    </pre>
	<h4>Methods</h4>
	<p>
		The <em>NotificationsController.js</em> currently uses <em>rmNotice()</em> and <em>addNotice()</em> to add and remove fake notifications from the notifications list.
		<em>addNotice()</em> uses the <a href="https://material.angularjs.org/latest/api/service/$mdToast">$mdToast service</a> to display a growl-like popup when a new notification is added.
	</p>
    
    <hr>
    
    <h2>Use cases</h2>
    
    <p>Below are the target use cases that OpenDesk will address. They are in Danish langauge.</p>
    
    <h3>Jørgen fra HR</h3>
    <p>
        Jørgen arbejder hjemme og bruger sin Chromebook. Han er ansat i HR
        Han skal skrive en artikel til INTRA, hvor han også har brug for at udstille dokumenter fra SBSYS.
        Desuden skal han have planlagt møde med skolernes HR medarbejdere.
        Endelig skal han ind i Ofir og revidere nogle udkast til jobopslag.
        Jørgens normale arbejdsplads er Windows native på grund af de mange windows applikationer han normalt benytter.
    </p>
    <p> 
        Han adgang.ballerup.dk (Access Manager) og logger sig på med sin AD konto. Han modtager en sms med kode som han skriver ind.
    </p>
    <p> 
        Han kommer til INTRA og klikker på ”min arbejdsplads. Arbejdspladsen (Glaspladen) starter hvor han har følgende muligheder:
    </p>
    <p> 
        INTRA, Mail, Kalender, Dokumenter og projekter, Chat, Andre apps. 
        Under ”Andre apps” har han adgang til Citrix apps, som for hans vedkommende er:
        SBSYS, Ofir Recruit, SD-løn, samt hele MS Office suiten. Hans Chromebook kan bruge den klientløse Receiver for HTML5
    </p>
    <p> 
        Han går ind på INTRA og skriver sin artikel, og tilføjer de 2 pdf filer fra SBSYS via at hente dem i Dokumenter/Alfresco
    </p>
    <p> 
        Han går ind i Kalender og finder et par mødetidspunkter for HR møde med skolernes HR folk. Der er 2 der ikke kan på disse tidspunkter. Han ser at de begge er online på Chatten, så han laver en chat-gruppe med dem begge og spørger om de kan flytte noget og hvilken dag der vil være bedst. Efter lidt dialog viser det sig at den ene dag godt kan bruges da de begge kan flytte nogle bookninger dér. Han booker mødet og tilføjer link til et dokument fra Alfresco på mødeindkaldelsen.
    </p>
    <p>
        Han går så i ”Andre apps” og starter Ofir Recruit (Native Windows app). Hans citrix app starter uden login fordi hans identitetsinformationer parses videre fra adgang.ballerup.dk’s  IDPservices
    </p>
    
    <h3>Svend</h3>
    <p>
        Svend sidder som projektleder på ”Træn dig fri” indsatsen i Social & Sundhed. 
    </p>
    <p> 
        Han vil gerne have et hurtigt møde med de andre projektdeltagere, da han har fået tilsendt en ny forbedret støttestrømpe, som er endnu lettere anvende for de ældre. 
    </p>
    <p> 
        Han går – via Arbejdspladsen – ind i ”Dokumenter og projekter” hvor han uploader dokumentationen om den nye strømpe. 
        Han indkalder dem til et ’her og nu’ møde over Chatten. De bruger videofaciliteten, så alle kan se hinanden. 
        De holder mødet og deler dokumenter fra leverandøren via skærmdelingen. Man får hurtigt fælles overblik og diskuteret business casen og taget en beslutning. 
    </p>
    <p> 
        Uden muligheden for anvendelse af ”Presence” og videokonferencen havde det været nødvendigt at indkalde til et fysisk møde, og der havde for fem ud af seks deltagere været spildtid forbundet med transport til mødet. Alternativt havde man måske ikke fundet tiden til mødet og en ny lille innovativ idé var strandet i dagligdagen. 
    </p>
    <p> 
        Svend kan gemme loggen fra mødet og lægger den op på ”dokumenter” under deres fælles projekt ”træn dig fri”. Fysisk ligger alle projektdokumenter nu i Alfresco og kan også tilgås dér via browser eller APP.
    </p>
    <p> 
        ..en måned senere
    </p>
    <p> 
        ”Træn dig fri” indsatsen i Social & Sundhed blev en kæmpe succes med afslutning for ca. 300 ældre deltagere i Ballerup Arena. 
    </p>
    <p>
        Svend går dagen efter ind og uploader alle billederne til Alfresco projektmappen, som indeholder alle projektdokumenterne. Han opretter desuden et (word?)dokument og laver hurtigt referat af afslutningsseancen.
        Han markerer mappen og klikker på ”Journalisér til SBSYS” knappen. Han finder den rette Sagsskabelon i listen, sætter hak i ’Alle dokumenter’ og trykker ’Journalisér og luk’.
        Derefter går han ind og laver en nyhed på ’Nyheder – Social & Sundhed’, og sætter det bedste billede ind som nyhedsbillede, samt linker 10 af de andre gode billeder ind fra Alfresco mappen. Sætter hak i ’Publicér til forside’ … og tar’ tidlig fyraften…
    </p>
    
    <h3>Susanne</h3>
    <p>  
        Susanne er ansat som lærer på Grantofteskolen.
    </p>
    <p>   
        Hun har en god historie omkring tiltag mod mobning, som hun gerne vil dele med sine kollegaer. Hun kan med sit UNI*C login logge på adgang.ballerup.dk, og via ”Arbejdspladsen” gå på INTRA og producere, redigere og publicerer historien under ”Nyheder – Grantofteskolen”.  
    </p>
    <p>    
        Hun klikker på ”Tilføj SBSYS dokument”, fremsøger sagen fra SBSYS – og henter de 3 børneinterviews (pdf) ind som links i artiklen. Bagved hentes dokumenterne til Alfrescos Intra site. Når man klikker på linket i INTRA åbner Alfresco-vieweren dokumentet i en ny fane – så man kan læse det.	
        Hun tilføjer et link til DRs dokumentar fra i aftes, og sætter hak i ”publicér til forside”.  
    </p>
    <p>    
        En central redaktør med ansvar for BK nyheder publicerer historien på forsiden af www.ballerup.dk. 
        Der kommer en lang række gode kommentarer og likes – og på mindre end en dag er historien ude i store dele af Ballerup Kommune. 
    </p>
    <p>    
        En pædagog fra børnehuset Lundegården ser artiklen på hjemmesiden. 
        I BH Lundegården har man et lignende projekt kørende, og hun kontakter Susanne. De aftaler på tværs af de to områder at dele viden under ”Dokumenter og projekter”. Så kan man lære af hinanden og skabe nye bedre tiltag ift. mobning…
    </p>
    <p>    
        De går hver især ind på deres projekt og tilføjer hinandens projektdeltagere i delingsfaciliteten.
    </p>
    
    <h3>Berit</h3>
    <p>
        Berit er børnehaveleder.
        Berit møder om morgenen. Inden dagens møde med fællestillidsmanden startet hun sin Mac bærbare og klikker på linket til adgang.ballerup.dk. Hun logger ind og præsenteres for Intra. Hun klikker på ”min arbejdsplads” og kommer ind Arbejdspladsen (Glaspladen).
    </p>
    <p>
        I et vindue kan Berit kan se dagens kalender. Der er 20 minutter til aftalen med tillidsmanden. 
        I vinduet ”leder nøgletal” (html) nederst til højre klikker Berit på alarmen med for ”hyppigt sygefravær”. Et nyt vindue (html) åbner med sygefraværsdata for Ulla på grøn stue.
    </p>
    <p>    
        Berit tjekker Ullas personalemappe i SDløn (native windows) som starter i et sømløst Citrix vindue. Login  styres af Ballerup idp service.
    </p>
    <p>    
        Berit tjekker på Intra – lederportal reglerne for sygefraværssamtaler og samarbejdspolitikken. Berit ser at der i hendes notifikationer på arbejdspladsen, er en mail fra Ole – hendes personale konsulent i HR. 
        Berit klikker på notifikationen og mailvinduet (html) åbner. Berit læser Oles kommentarer til hendes samtale med tillidsmanden om kommunens nye sygefraværs og fastholdelsespolitik. der er et link til politikken på Intra.
        Berit når at se en ny notifikation om at hendes nye nøglestal for økonomi er fine, samt at hendes souschef Karin har journaliseret en kladde til referat fra forældremødet aftenen inden. Det ligger til godkendelse i Dokumenter.
        Berit har stadig tid så hun klikker på linket til Referatet, læser det og godkender det. Referatet bliver automatisk journaliseret på den sag Karin har angivet. I Dokumenter står referatet nu som endeligt.
        Berit lukker vinduet logger ud, og er klar til samtalen med tillidsmanden.
    </p>
    <p>
        Efter samtalen logger Berit ind på Arbejdspladsen (Glaspladen) og åbner personalesagen. Berit skriver sit referat af samtalen og sender et link til tillidsmanden. Når tillidsmanden har læst og accepteret referatet kan det gøres aktivt på personalesagen – indtil da optræder det i Dokumenter.
    </p>

</article>
