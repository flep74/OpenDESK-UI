<div class="od-projects" ng-show="vm.isMember || vm.project.visibility == 'PUBLIC'">

    <h1 class="od-title">
        <span ng-if="vm.project.type == vm.strings.templateProject">{{'COMMON.TEMPLATEPROJECT' | translate}} :</span>
        <span ng-if="vm.project.type == 'PD-Project'">{{'PROJECT.PROJECT' | translate}} :</span>
        <span ng-if="vm.project.type == 'Project'">{{'PROJECT.GROUPROOM' | translate}} :</span>
        {{ vm.project.title }}</h1>

    <div layout="row" layout-align="space-between center">
        <a class="md-button" style="font-size: 14px" href="{{vm.project.type == vm.strings.templateProject ? '#!/indstillinger/systemopsætning/skabeloner' : '#!/projekter'}}"><i class="material-icons">arrow_back</i>
            {{'COMMON.BACK' | translate }} {{'COMMON.TO' | translate | lowercase }}
            <span ng-if="vm.project.type == vm.strings.templateProject">{{'SYSTEM_SETTINGS.SYSTEM_SETTINGS' | translate | lowercase}}</span>
            <span ng-if="vm.project.type != vm.strings.templateProject">{{'PROJECT.PROJECTS' | translate | lowercase}}</span>  
            <!--{{vm.project.type == vm.strings.templateProject ? "skabeloner" : "projekter"}}-->
        </a>

        <div ng-include="'app/src/sites/view/search.tmpl.html'"></div>
    </div>

    <div layout-gt-sm="row">
        <md-card flex-gt-sm="vm.project.type != vm.strings.templateProject ? 75 : 100">
            <md-card-content>
                <h2 class="od-title-icon od-primary"><i class="material-icons">library_books</i>{{'DOCUMENT.DOCUMENTS' | translate }}</h2>

                <breadcrumb paths="vm.paths"></breadcrumb>

                <md-list class="sortHead">

                    <table class="od-members od-members-row">
                        <thead fix-head>
                        <tr>
                            <th class="od-secondary" sort-table="name" sort-default="!reverse" title="Sortér kolonne">{{'PROJECT.NAME' | translate }}</th>
                            <th class="od-secondary" sort-table="lastChanged" title="Sortér kolonne">{{'PROJECT.HISTORY' | translate }}</th>
                            <th colspan="2">
                                <input type="checkbox" name="all-to-esdh" aria-label="Vælg alle" ng-model="vm.sendToEsdh">
                            </th>
                        </tr>
                        </thead>
                        <tbody>

                            <tr ng-show="content.contentType === 'cmis:document'"
                                ng-repeat="content in contents | orderObjectBy:orderByAttribute:reverseOrder"
                                ng-include="'app/src/sites/view/fileTableRow.tmpl.html'">
                            </tr>
                            <tr ng-show="content.contentType === 'cmis:folder'"
                                ng-repeat="content in contents | orderObjectBy:orderByAttribute:reverseOrder"
                                ng-include="'app/src/sites/view/fileTableRow.tmpl.html'">
                            </tr>
                            <tr ng-show="content.contentType === 'cmis:link'"
                                ng-repeat="content in contents | orderObjectBy:orderByAttribute:reverseOrder"
                                ng-include="'app/src/sites/view/fileTableRow.tmpl.html'">
                            </tr>

                        </tbody>
                    </table>
                </md-list>

                <p ng-show="contents.length === 0">
                    {{'COMMON.EMPTY_FOLDER' | translate}}
                </p>

                <md-divider></md-divider>

                <div layout="row" layout-align="start center" class="btnAlign">
                    <div layout="column">
                        <md-menu>
                            <md-button ng-click="$mdMenu.open($event)" class="md-icon-button md-primary z-index-0" aria-label="Upload dokumenter">
                                <md-tooltip md-direction="top">{{'COMMON.UPLOAD' | translate}} {{'DOCUMENT.DOCUMENTS' | translate | lowercase}}</md-tooltip>
                                <i class="material-icons">file_upload</i>
                            </md-button>
                            <md-menu-content>
                                <md-menu-item>
                                    <md-button ng-click="vm.uploadDocumentsDialog($event)">{{'COMMON.UPLOAD' | translate}} {{'COMMON.FROM' | translate | lowercase}}  {{'COMMON.COMPUTER' | translate}}</md-button>
                                </md-menu-item>
                                <md-menu-item ng-if="vm.project.type != vm.strings.templateProject">
                                    <md-button ng-click="vm.loadSbsysDialog($event)">{{'COMMON.UPLOAD' | translate}} {{'COMMON.FROM' | translate | lowercase}}  {{'ESDH' | translate}} </md-button>
                                </md-menu-item>
                            </md-menu-content>
                        </md-menu>
                    </div>

                    <div layout="column">
                        <md-menu ng-if="vm.project.type != vm.strings.templateProject && vm.canEdit">
                            <md-button ng-click="$mdMenu.open($event)" class="md-icon-button md-primary z-index-0" aria-label="Opret dokument">
                                <i class="material-icons">note_add</i>
                                <md-tooltip md-direction="top">{{'COMMON.CREATE' | translate}} {{'DOCUMENT' | translate | lowercase}}</md-tooltip>
                            </md-button>
                            <md-menu-content>
                                <md-menu-item ng-repeat="template in templateDocuments">
                                <md-button ng-click="vm.newTemplateDialog($event,template)">
                                    <i class="material-icons">
                                        <img class="md-avatar" 
                                         ng-src="app/assets/images/filetypes/{{template.thumbNailURL}}"
                                         onerror="this.src='app/assets/images/filetypes/generic-file-24.png'">    
                                    </i> 
                                    {{template.name}}
                                </md-button>
                            </md-menu-item>
                            </md-menu-content>
                        </md-menu>
                    </div>

                    <md-button ng-if="vm.canEdit" class="md-icon-button md-primary z-index-0"
                               ng-click="vm.newFolderDialog($event)">
                               <md-tooltip md-direction="top">{{'COMMON.CREATE' | translate}} {{'COMMON.FOLDER' | translate | lowercase}}</md-tooltip>
                               <i class="material-icons">create_new_folder</i>
                    </md-button>

                    <md-button ng-if="vm.project.type != vm.strings.templateProject && vm.isManager" class="md-icon-button md-primary z-index-0"
                               ng-click="vm.newLinkDialog($event)">
                               <md-tooltip md-direction="top">{{'COMMON.CREATE' | translate}} {{'PROJECT.PROJECTLINK' | translate | lowercase}}</md-tooltip>
                               <i class="material-icons">link</i> 
                    </md-button>

                    <span flex></span>

                    <md-button ng-show="vm.sendToEsdh" ng-if="vm.project.type != vm.strings.templateProject"  ng-click="vm.uploadSbsysDialog($event)" class="md-primary" aria-label="SBSYS">
                        <md-tooltip md-direction="top">{{'COMMON.UPLOAD' | translate }} {{'COMMON.TO' | translate | lowercase }} {{'ESDH' | translate }}</md-tooltip>
						<i class="material-icons">device_hub</i>
						<span style="margin-left: 10px; margin-right: 20px;">
                            {{'ESDH' | translate }}
                        </span>
					</md-button>
                </div>
            </md-card-content>
        </md-card>        
        <div flex-gt-sm="25" ng-if="vm.project.type != vm.strings.templateProject">
            <div ng-include="'app/src/sites/modules/pd_sites/view/groups_overview.html'"></div>
        </div>
    </div>
</div>
<div class="od-projects" ng-if="vm.isMember != null && !vm.isMember && vm.project.visibility == 'PRIVATE'">
    <span ng-if="vm.project.type == 'PD-Project'">{{'PROJECT.NO_ACCESS_PROJECT' | translate}}</span>
    <span ng-if="vm.project.type == 'Project'">{{'PROJECT.NO_ACCESS_GROUPROOM' | translate}}</span>
</div>