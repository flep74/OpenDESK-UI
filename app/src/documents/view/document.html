<div layout="row" layout-align="space-between center">

	<h1 class="od-title">Projekt: {{ vm.title }}</h1>

    <a class="md-button" href="#!/projekter"><i class="material-icons">arrow_back</i> Tilbage til projekter</a>

    <div ng-controller="SearchController as vm" class="od-search" layout="row" style="margin-top:15px;">
        <span flex></span>

        <form name="doSearch" ng-submit="vm.getSearchresults(searchText);">
            <i class="material-icons">search</i>
            <md-autocomplete
                    md-input-name="autocomplete"
                    md-selected-item="searchQuery"
                    md-search-text="searchText"
                    md-items="r in vm.getAutoSuggestions(searchText)"
                    md-item-text="r.name"
                    md-floating-label="Søg dokumenter">
                <md-item-template>
                    <span md-highlight-text="searchText" ng-click="vm.gotoPath(r.nodeRef);">{{r.name}}</span>
                </md-item-template>
                <div ng-messages="autocompleteForm.autocomplete.$error">
                    <div ng-message="required">Dette felt skal udfyldes</div>
                </div>
            </md-autocomplete>
        </form>
    </div>
</div>


<md-content layout="column" layout-padding>

    <breadcrumb paths="vm.paths"></breadcrumb>

<div layout="row">
	<div flex="55">
		<h1 class="md-headline">
			{{ vm.doc.fileName }}
		</h1>
	</div>
	<div ng-show="vm.canEdit" flex="45" style="position: relative; top: 10px;">
		<md-button ng-click="vm.goToLOEditPage(true)" class="md-primary md-raised">
			Redigér dokument
		</md-button>
	</div>
</div>

    <div layout-sm="column" layout-gt-sm="row">
        <div style="max-width:1500px;max-height:610px; overflow: auto;" flex-gt-sm="66">
            <ng-include src="viewerTemplateUrl"></ng-include>
        </div>

        <div flex-gt-sm="33" style="padding: 0 1rem; background-color: #f9f9f9;">
			<h4 ng-click="vm.showArchived = !vm.showArchived"
				class="pd-group-toggle"
				ng-class="vm.showArchived ? 'open' : 'closed'"
				layout="row">
				<i class="material-icons header">history</i>&nbsp;<span style="position: relative; top: 3px;">Historik</span>
				<span flex></span>
				<i id="rotateArrow" class="material-icons">keyboard_arrow_down</i>
			</h4>
			<ul ng-show="vm.showArchived">
				<p class="transition pHeader">
					<span style="width: 164px;">Senest ændret</span>
					<span>Senest ændret af&nbsp;</span>
					<br>
				</p>
				<p class="transition pContent">
					<span id="{{h.nodeRef}}" ng-repeat="h in history">
						<a href="/#!/dokument/{{h.nodeRef}}?archived=true&parent={{h.parent_nodeRef}}&version={{h.version}}">
							<span style="width: 138px;">{{ h.created | openeDate }}</span>{{ h.modifier }}
						</a>
					</span>
				</p>
			</ul>
            <dl>
				<!--div>
					<dt>
						Oprettet
					</dt>
					<dd>
						{{ vm.doc.createdOn }}
					</dd>
					<dt>
						Oprettet af
					</dt>
					<dd>
						{{ vm.doc.createdBy }}
					</dd>
					<dt>
						Senest ændret
					</dt>
					<dd>
						{{ vm.doc.modifiedOn }}
					</dd>
					<dt>
						Senest ændret af
					</dt>
					<dd>
						{{ vm.doc.modifiedBy }}
					</dd>
				</div-->
				
				
				
                <ng-if ng-if="vm.wf" class="od-notifylist--item--nolink">
                    <br>
					<md-divider></md-divider>
					<!--dt-->
                    <h4>Review</h4>
                    <!--/dt-->
                    <dd>
						<div layout="row" style="margin: 10px 0 20px 0;">
							<i class="material-icons">info_outline</i>&nbsp;&nbsp;<span style="position:relative; top: 4px;">Du er blevet bedt om at reviewe dette dokument af {{vm.wf_from}} med følgende kommentar: {{wf_comment}} </span>
						</div>


						
						Du kan 
						<md-button class="md-primary" style="padding: 2px 0 2px 0; margin: 2px 0 2px 0; min-width: 0;" ng-click="vm.goToLOEditPage(false)">
                            Redigere
                        </md-button>
						dokumentet, inden du godkender eller afviser.

						<div style="margin-top: 20px" ng-controller="DocumentController as dc">

							<md-button class="md-raised md-primary" ng-click="dc.godkendDialog($event)">
								Godkend
							</md-button>



							<md-button class="md-raised" ng-click="dc.afvisDialog($event)">
								Afvis
							</md-button>
						</div>
                    </dd>
                </ng-if>

				<ng-if ng-if="vm.wfr" class="od-notifylist--item--nolink">
					<br>
					<md-divider></md-divider>
					<!--dt-->
					<h4>Review</h4>
					<!--/dt-->
					<dd>
						<div layout="row" style="margin: 10px 0 20px 0;">
							<i class="material-icons">info_outline</i>&nbsp;&nbsp;<span style="position:relative; top: 4px;">Dokumentet er besvaret af {{vm.wf_from}} med følgende kommentar: {{wf_comment}} </span>
						</div>




					</dd>
				</ng-if>

            </dl>
        </div>
    </div>

</md-content>
